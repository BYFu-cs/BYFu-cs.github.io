---
layout: default
title: Blogs
permalink: /blog/
---

<!-- 搜索框 -->
<div class="search-container">
  <div class="search-icon" onclick="performSearch()">
    <img src="/images/istockphoto-icon.jpg" alt="Search">
  </div>
  <input type="text" id="search-input" placeholder="Search Blogs...">
  <ul id="results-container"></ul>
</div>
<script src="https://unpkg.com/simple-jekyll-search/dest/simple-jekyll-search.js"></script>
<script>
  const posts = [
    {% for post in site.blog %}
      {
        title: "{{ post.title }}",
        url: "{{ post.url }}",
        desc: "{{ post.excerpt | strip_html | strip_newlines | replace: '"', '\"' }}"
      }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ];

  window.simpleJekyllSearch = new SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('results-container'),
    json: posts,
    searchResultTemplate: '<li><a href="{url}?query={query}" title="{desc}">{title}</a></li>',
    noResultsText: 'No Result!',
    limit: 10,
    fuzzy: false,
    exclude: ['Welcome']
  });
</script>

<!-- 帖子列表 -->
<div class="posts">
  {% for post in site.blog %}
    <article class="post">
      <h1><a href="{{ site.baseurl }}{{ post.url }}">{{ post.title }}</a></h1>
      <div class="entry">
        {{ post.excerpt }}
      </div>
      <a href="{{ site.baseurl }}{{ post.url }}" class="read-more">Read More</a>
    </article>
  {% endfor %}
</div>

<!-- 分页 -->
<div id="pagination-container"></div>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const postsPerPage = 4;
    const postsContainer = document.querySelector('.posts');
    const paginationContainer = document.getElementById('pagination-container');
    const posts = Array.from(postsContainer.getElementsByClassName('post'));
    const totalPages = Math.ceil(posts.length / postsPerPage);

    function showPage(page) {
      posts.forEach((post, index) => {
        post.style.display = (index >= (page - 1) * postsPerPage && index < page * postsPerPage) ? 'block' : 'none';
      });
    }

    function createPagination() {
      paginationContainer.innerHTML = '';
      const maxVisiblePages = 5;
      const currentPage = parseInt(document.querySelector('.pagination-link.active')?.textContent || 1);

      for (let i = 1; i <= totalPages; i++) {
        if (i === 1 || i === totalPages || (i >= currentPage - 2 && i <= currentPage + 2)) {
          const link = document.createElement('a');
          link.href = '#';
          link.textContent = i;
          link.className = 'pagination-link';
          link.addEventListener('click', function (e) {
            e.preventDefault();
            document.querySelectorAll('.pagination-link').forEach(link => link.classList.remove('active'));
            this.classList.add('active');
            showPage(i);
            createPagination();
            window.scrollTo({ top: 0, behavior: 'smooth' });
          });
          paginationContainer.appendChild(link);
        } else if (i === currentPage - 3 || i === currentPage + 3) {
          const ellipsis = document.createElement('span');
          ellipsis.textContent = '...';
          paginationContainer.appendChild(ellipsis);
        }
      }
    }

    createPagination();
    showPage(1); // show the first page by default
    document.querySelector('.pagination-link').classList.add('active');
  });
</script>
