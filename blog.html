---
layout: default
title: Blogs
permalink: /blog/
---

<!-- 搜索框 -->
<div class="search-container">
  <div class="search-icon" onclick="performSearch()">
    <img src="/images/istockphoto-icon.jpg" alt="Search">
  </div>
  <input type="text" id="search-input" placeholder="Search Blogs...">
  <ul id="results-container"></ul>
</div>
<script src="https://unpkg.com/simple-jekyll-search/dest/simple-jekyll-search.js"></script>
<script>
  const posts = [
    {% for post in site.blog %}
      {
        title: "{{ post.title }}",
        url: "{{ post.url }}",
        desc: "{{ post.excerpt | strip_html | strip_newlines | replace: '"', '\"' }}"
      }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ];

  window.simpleJekyllSearch = new SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('results-container'),
    json: posts,
    searchResultTemplate: '<li><a href="{url}?query={query}" title="{desc}">{title}</a></li>',
    noResultsText: 'No Result!',
    limit: 10,
    fuzzy: false,
    exclude: ['Welcome']
  });
</script>

<!-- 帖子列表：仅对标题为 "Our work has been accepted!" 的文章使用图片左侧、摘要右侧布局 -->
<div class="posts">
  <style>
    .post-list-flex{display:flex;gap:20px;align-items:center}
    .post-left{flex:0 0 220px;display:flex;flex-direction:column;align-items:center;gap:12px}
    .post-cover img{width:100%;border-radius:12px;display:block}
    .post-tags{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:center;gap:8px;margin-top:8px;width:100%}
    .post-summary{flex:1;padding-left:18px}
    .tag-badge{display:inline-flex;align-items:center;justify-content:center;background:#fff;color:#1f2937;padding:6px 12px;border-radius:999px;border:1px solid #e6eef9;box-shadow:0 6px 18px rgba(15,23,42,0.06);margin:4px 6px 0 0}
    .text-lightblue{background:linear-gradient(180deg,#e6f5ff,#d9eeff);color:#0366d6;padding:6px 10px;border-radius:8px;font-weight:700;border:1px solid rgba(3,102,214,0.12)}
    .text-red{background:linear-gradient(180deg,#fff0f0,#ffecec);color:#b91c1c;padding:6px 10px;border-radius:8px;font-weight:700;border:1px solid rgba(185,28,28,0.08);margin-left:6px}
    /* Hide inline tooltip containers when rendering the posts listing
       (we render badges under the cover instead). */
    .posts .tooltip-container-lightblue,
    .posts .tooltip-container-red {
      display: none !important;
    }
  </style>
  {% for post in site.blog %}
    {% if post.title == "Our work has been accepted!" %}
      <article class="post post-list-item">
        <h2 class="post-card-title"><a href="{{ site.baseurl }}{{ post.url }}">{{ post.title }}</a></h2>

        {% comment %} extract first image src from post.content (first occurrence) or fallback to excerpt {% endcomment %}
        {% comment %} Prefer explicit cover in front matter, otherwise extract first image src {% endcomment %}
        {% assign img_src = nil %}
        {% if post.cover %}
          {% assign img_src = post.cover %}
        {% elsif post.content contains 'src="' %}
          {% assign parts = post.content | split: 'src="' %}
          {% assign after_src = parts[1] %}
          {% assign img_src = after_src | split: '"' | first %}
        {% elsif post.excerpt contains 'src="' %}
          {% assign parts = post.excerpt | split: 'src="' %}
          {% assign after_src = parts[1] %}
          {% assign img_src = after_src | split: '"' | first %}
        {% endif %}

        {% comment %} capture any tooltip-container divs from post.content and render them below the cover {% endcomment %}
        <div class="post-list-flex">
          <div class="post-left">
            <div class="post-cover">
              {% if img_src %}
                <img src="{{ img_src }}" alt="{{ post.title }}"/>
              {% else %}
                <div class="post-cover-placeholder"></div>
              {% endif %}
            </div>
            <div class="post-tags">
              {% if post.badges %}
                {% for badge in post.badges %}
                  <span class="tag-badge">{{ badge }}</span>
                {% endfor %}
              {% else %}
                {% for t in post.tags %}
                  <span class="tag-badge">#{{ t }}</span>
                {% endfor %}
              {% endif %}
            </div>
          </div>

          <div class="post-summary">
            <p>{{ post.excerpt | strip_html | strip_newlines | truncatewords: 55 }}</p>
            <a href="{{ site.baseurl }}{{ post.url }}" class="read-more">Read More</a>
          </div>
        </div>
      </article>
    {% else %}
      <article class="post">
        <h1><a href="{{ site.baseurl }}{{ post.url }}">{{ post.title }}</a></h1>
        <div class="entry">
          {{ post.excerpt }}
        </div>
        <a href="{{ site.baseurl }}{{ post.url }}" class="read-more">Read More</a>
      </article>
    {% endif %}
  {% endfor %}
</div>

<!-- 分页 -->
<div id="pagination-container"></div>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const postsPerPage = 4;
    const postsContainer = document.querySelector('.posts');
    const paginationContainer = document.getElementById('pagination-container');
    const posts = Array.from(postsContainer.getElementsByClassName('post'));
    const totalPages = Math.ceil(posts.length / postsPerPage);

    function showPage(page) {
      posts.forEach((post, index) => {
        post.style.display = (index >= (page - 1) * postsPerPage && index < page * postsPerPage) ? 'block' : 'none';
      });
    }

    function createPagination() {
      paginationContainer.innerHTML = '';
      const maxVisiblePages = 5;
      const currentPage = parseInt(document.querySelector('.pagination-link.active')?.textContent || 1);

      for (let i = 1; i <= totalPages; i++) {
        if (i === 1 || i === totalPages || (i >= currentPage - 2 && i <= currentPage + 2)) {
          const link = document.createElement('a');
          link.href = '#';
          link.textContent = i;
          link.className = 'pagination-link';
          link.addEventListener('click', function (e) {
            e.preventDefault();
            document.querySelectorAll('.pagination-link').forEach(link => link.classList.remove('active'));
            this.classList.add('active');
            showPage(i);
            createPagination();
            window.scrollTo({ top: 0, behavior: 'smooth' });
          });
          paginationContainer.appendChild(link);
        } else if (i === currentPage - 3 || i === currentPage + 3) {
          const ellipsis = document.createElement('span');
          ellipsis.textContent = '...';
          paginationContainer.appendChild(ellipsis);
        }
      }
    }

    createPagination();
    showPage(1); // show the first page by default
    document.querySelector('.pagination-link').classList.add('active');
  });
</script>
